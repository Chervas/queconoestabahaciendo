import{a,b as R,h as U,i as q}from"./chunk-IIGBF2VE.js";import{a as K,b as N}from"./chunk-CUYXMCNI.js";import"./chunk-4K3KITG2.js";import{Ca as o,Cb as b,Ga as y,Ib as f,Kb as h,Ma as M,Sa as m,Tb as P,Za as l,_b as O,bc as k,cc as T,fb as i,fc as H,ga as x,gb as n,gc as I,ha as v,hb as _,jd as w,lb as E,nb as u,nd as S,ob as p,od as F,pd as A,qd as B,rd as D,sd as L,td as V,ud as z,vd as j,wd as $,yb as r,zb as g}from"./chunk-XJQRPAJU.js";function G(e,d){if(e&1){let t=E();i(0,"button",10),u("click",function(){x(t);let s=p();return v(s.clearAllHistory())}),i(1,"mat-icon"),r(2,"delete_sweep_outlined"),n()()}}function J(e,d){e&1&&(i(0,"div",11),_(1,"mat-spinner",12),i(2,"p"),r(3,"Cargando historial..."),n()())}function Q(e,d){e&1&&(i(0,"div",13)(1,"mat-icon",14),r(2,"history_edu_outlined"),n(),i(3,"p"),r(4,"A\xFAn no hay actividad registrada."),n(),i(5,"p"),r(6,"\xA1Las tareas y h\xE1bitos completados aparecer\xE1n aqu\xED!"),n()())}function W(e,d){if(e&1&&(i(0,"p"),r(1),n()),e&2){let t=p().$implicit;o(),g(t.description)}}function X(e,d){if(e&1&&(i(0,"p"),r(1),n()),e&2){let t=p().$implicit;o(),g(t.metadata.additionalInfo)}}function Y(e,d){if(e&1&&(i(0,"mat-card",17)(1,"mat-card-header")(2,"div",18)(3,"mat-icon"),r(4),n()(),i(5,"mat-card-title"),r(6),n(),i(7,"mat-card-subtitle"),r(8),f(9,"date"),f(10,"date"),n()(),i(11,"mat-card-content"),m(12,W,2,1,"p",19)(13,X,2,1,"p",19),n()()),e&2){let t=d.$implicit,c=p(2);o(4),g(c.getIconForEntryType(t.type)),o(2),g(t.title),o(2),b(" ",c.getTypeLabel(t.type)," - ",h(9,7,t.timestamp,"mediumDate")," a las ",h(10,10,t.timestamp,"shortTime")," "),o(4),l("ngIf",t.description),o(),l("ngIf",t.metadata&&t.metadata.additionalInfo)}}function Z(e,d){if(e&1&&(i(0,"div",15),m(1,Y,14,13,"mat-card",16),n()),e&2){let t=p();o(),l("ngForOf",t.displayedHistoryEntries)("ngForTrackBy",t.trackById)}}var Et=(()=>{class e{constructor(t,c){this.historyService=t,this.location=c,this.displayedHistoryEntries=[],this.isLoading=!0,this.historyEntriesSignal=this.historyService.getHistoryEntries(),P(()=>{this.displayedHistoryEntries=[...this.historyEntriesSignal()].sort((s,C)=>C.timestamp-s.timestamp),this.isLoading=!1})}ngOnInit(){this.historyEntriesSignal().length}goBack(){this.location.back()}clearAllHistory(){this.historyService.clearHistory()}trackById(t,c){return c.id}getIconForEntryType(t){switch(t){case a.TASK_COMPLETED:return"task_alt";case a.HABIT_COMPLETED:return"check_circle";case a.HABIT_CREATED:return"add_circle";case a.HABIT_UPDATED:return"edit";case a.HABIT_DELETED:return"delete";case a.PHASE_COMPLETED:return"emoji_events";default:return"history"}}getTypeLabel(t){switch(t){case a.TASK_COMPLETED:return"Tarea completada";case a.HABIT_COMPLETED:return"H\xE1bito completado";case a.HABIT_CREATED:return"H\xE1bito creado";case a.HABIT_UPDATED:return"H\xE1bito actualizado";case a.HABIT_DELETED:return"H\xE1bito eliminado";case a.PHASE_COMPLETED:return"Fase completada";default:return"Actividad"}}static{this.\u0275fac=function(c){return new(c||e)(y(R),y(O))}}static{this.\u0275cmp=M({type:e,selectors:[["app-history-view"]],decls:13,vars:4,consts:[[1,"history-view-container"],["color","background",1,"history-toolbar"],["mat-icon-button","","aria-label","Volver a la vista principal",3,"click"],[1,"history-title"],[1,"toolbar-spacer"],["mat-icon-button","","aria-label","Limpiar todo el historial",3,"click",4,"ngIf"],[1,"history-content"],["class","loading-spinner-container",4,"ngIf"],["class","empty-history-message",4,"ngIf"],["class","history-list",4,"ngIf"],["mat-icon-button","","aria-label","Limpiar todo el historial",3,"click"],[1,"loading-spinner-container"],["diameter","50"],[1,"empty-history-message"],[1,"message-icon"],[1,"history-list"],["class","history-item-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"history-item-card"],["mat-card-avatar","",1,"history-item-avatar"],[4,"ngIf"]],template:function(c,s){c&1&&(i(0,"div",0)(1,"mat-toolbar",1)(2,"button",2),u("click",function(){return s.goBack()}),i(3,"mat-icon"),r(4,"arrow_back_outlined"),n()(),i(5,"span",3),r(6,"Historial de Actividades"),n(),_(7,"span",4),m(8,G,3,0,"button",5),n(),i(9,"div",6),m(10,J,4,0,"div",7)(11,Q,7,0,"div",8)(12,Z,2,2,"div",9),n()()),c&2&&(o(8),l("ngIf",s.displayedHistoryEntries.length>0),o(2),l("ngIf",s.isLoading),o(),l("ngIf",!s.isLoading&&s.displayedHistoryEntries.length===0),o(),l("ngIf",!s.isLoading&&s.displayedHistoryEntries.length>0))},dependencies:[I,k,T,H,N,K,A,F,S,w,q,U,$,B,j,L,z,V,D],styles:[".history-view-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:var(--app-background-color, #FAF8F0)}.dark-theme[_ngcontent-%COMP%]   .history-view-container[_ngcontent-%COMP%]{background-color:var(--app-dark-background-color, #263238)}.history-toolbar[_ngcontent-%COMP%]{background-color:transparent;color:var(--app-toolbar-text-color, #333333);border-bottom:1px solid var(--app-toolbar-border-color, #E0E0E0)}.dark-theme[_ngcontent-%COMP%]   .history-toolbar[_ngcontent-%COMP%]{color:var(--app-dark-toolbar-text-color, #ECEFF1);border-bottom:1px solid var(--app-dark-toolbar-border-color, #455A64)}.history-title[_ngcontent-%COMP%]{font-weight:500;margin-left:16px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.history-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;align-items:center}.loading-spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:var(--app-text-secondary-color, #757575);margin-top:20px}.dark-theme[_ngcontent-%COMP%]   .loading-spinner-container[_ngcontent-%COMP%]{color:var(--app-dark-text-secondary-color, #B0BEC5)}.loading-spinner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;font-size:1.1em}.empty-history-message[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:var(--app-text-secondary-color, #757575);background-color:var(--app-surface-color-variant, #F5F5F5);border-radius:16px;margin-top:20px;width:100%;max-width:600px}.dark-theme[_ngcontent-%COMP%]   .empty-history-message[_ngcontent-%COMP%]{color:var(--app-dark-text-secondary-color, #B0BEC5);background-color:var(--app-dark-surface-color-variant, #37474F)}.empty-history-message[_ngcontent-%COMP%]   .message-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:var(--app-icon-color-secondary, #BDBDBD)}.dark-theme[_ngcontent-%COMP%]   .empty-history-message[_ngcontent-%COMP%]   .message-icon[_ngcontent-%COMP%]{color:var(--app-dark-icon-color-secondary, #757575)}.empty-history-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;line-height:1.6;margin:8px 0}.history-list[_ngcontent-%COMP%]{width:100%;max-width:700px;display:flex;flex-direction:column;gap:12px}.history-item-card[_ngcontent-%COMP%]{background-color:var(--app-surface-color, #FFFFFF);border-radius:12px;box-shadow:0 2px 4px #0000000d;border:1px solid var(--app-surface-border-color, #E0E0E0);opacity:.9}.dark-theme[_ngcontent-%COMP%]   .history-item-card[_ngcontent-%COMP%]{background-color:var(--app-dark-surface-color, #455A64);border:1px solid var(--app-dark-surface-border-color, #546E7A);color:var(--app-dark-text-primary-color, #ECEFF1)}.history-item-avatar[_ngcontent-%COMP%]{background-color:var(--app-success-color, #4CAF50);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#fff}.dark-theme[_ngcontent-%COMP%]   .history-item-avatar[_ngcontent-%COMP%]{background-color:var(--app-dark-success-color, #81C784)}.history-item-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.1em}.history-item-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:.85em}.history-item-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95em;line-height:1.4;margin:4px 0}.history-item-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px}@media (max-width: 600px){.history-content[_ngcontent-%COMP%]{padding:8px}.history-list[_ngcontent-%COMP%]{gap:8px}}"]})}}return e})();export{Et as HistoryViewComponent};
/**i18n:cbc6eedd78daabc21d38dc76dc1d9c98cb25f2a080c64096148af3a26e2a8f0f*/
