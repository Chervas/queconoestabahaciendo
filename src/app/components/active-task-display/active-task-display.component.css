/* Estilos para ActiveTaskDisplayComponent - Basado en Referencia v6 y v7 */

/* Contenedor principal de la tarjeta de tarea activa */
.m3-card-base.m3-active-task-card {
  background-color: var(--app-active-task-card-background, var(--app-light-surface-container));
  border-radius: var(--app-border-radius-card);
  padding: 0; 
  margin-bottom: var(--app-spacing-inter-task-gap);
  border: 1px solid var(--app-active-task-card-outline, transparent);
  display: flex;
  flex-direction: column;
  overflow: hidden; 
  width: 100%; 
  box-sizing: border-box;
}

.dark-theme .m3-card-base.m3-active-task-card {
  background-color: var(--app-dark-surface-container); /* Corrected: Use dark theme variable */
  border-color: var(--app-dark-active-task-card-outline, transparent);
}

/* Secci√≥n superior de la tarjeta: Contiene el wrapper del contenido principal */
.m3-card-top-section {
  width: 100%;
  box-sizing: border-box;
}

.m3-active-task-card-main-content-wrapper {
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: var(--app-spacing-card-padding); 
  box-sizing: border-box;
}

/* Encabezado de la tarjeta */
.m3-card-header-v6 {
  display: flex;
  justify-content: space-between;
  align-items: center; 
  margin-bottom: var(--app-spacing-internal-card-primary);
  width: 100%;
}

.m3-header-start-v6 {
  display: flex;
  align-items: flex-start; 
  gap: var(--app-spacing-internal-card-primary); 
  flex-grow: 1;
  min-width: 0; 
}

.m3-icon-button-menu-v6 {
  color: var(--app-light-on-surface-variant);
  margin: 0;
  padding: 0;
  width: 24px; 
  height: 24px; 
  display: inline-flex; 
  align-items: center;
  justify-content: center;
  margin-top: 2px; 
}

.dark-theme .m3-icon-button-menu-v6 {
  color: var(--app-dark-on-surface-variant);
}

.m3-icon-button-menu-v6 mat-icon {
 font-size: 24px; 
}

.m3-title-group-v6 {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  min-width: 0;
}

.m3-task-title-v6 {
  font-family: var(--app-font-family, "Roboto", sans-serif);
  font-size: 24px; 
  font-weight: 400; 
  line-height: 32px; 
  letter-spacing: 0px; 
  color: var(--app-light-on-surface);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dark-theme .m3-task-title-v6 { color: var(--app-dark-on-surface); }

.m3-task-subtitle-v6 {
  font-size: var(--app-font-size-task-subtitle);
  font-weight: var(--app-font-weight-task-subtitle);
  color: var(--app-light-on-surface-variant);
  margin-top: 2px; 
  line-height: 1.3;
}

.dark-theme .m3-task-subtitle-v6 { color: var(--app-dark-on-surface-variant); }

.m3-header-end-v6 {
  display: flex;
  align-items: center;
  gap: var(--app-spacing-internal-card-primary);
  flex-shrink: 0;
}

.m3-timer-group-v6 {
  display: flex;
  align-items: center;
  gap: var(--app-spacing-internal-card-secondary);
}

.m3-timer-icon-v6 {
  color: var(--app-light-on-surface-variant); 
  font-size: 20px; 
}

.dark-theme .m3-timer-icon-v6 { color: var(--app-dark-on-surface-variant); }

.m3-timer-text-v6 {
  font-family: var(--app-font-family, "Roboto", sans-serif);
  font-size: 28px; 
  font-weight: 400; 
  line-height: 36px; 
  letter-spacing: 0px; 
  color: var(--app-light-on-surface); 
  min-width: 40px; 
  text-align: right;
}

.dark-theme .m3-timer-text-v6 { color: var(--app-dark-on-surface); }

.m3-icon-button-play-pause-v6 {
  background-color: var(--app-light-icon-button-bg); 
  color: var(--app-light-icon-button-fg);
  border-radius: var(--app-border-radius-icon-button-circular); 
  width: 40px;
  height: 40px;
  padding: 0;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
}

.dark-theme .m3-icon-button-play-pause-v6 {
  background-color: var(--app-dark-icon-button-bg);
  color: var(--app-dark-icon-button-fg);
}

.m3-icon-button-play-pause-v6 mat-icon {
  font-size: 24px;
}

.m3-card-content-area-v6 {
  display: flex;
  flex-direction: row; 
  align-items: flex-start; 
  gap: var(--app-spacing-card-padding); 
  width: 100%;
  padding-left: 0; 
  box-sizing: border-box; 
}

.m3-task-description-container-v6 {
  flex-grow: 1; 
  min-width: 0;
  max-width: 50%; 
  margin-top: 0; 
  padding-left: calc(24px + var(--app-spacing-internal-card-primary)); 
  box-sizing: border-box;
}

.m3-task-description-v6 {
  font-size: var(--app-font-size-description);
  font-weight: var(--app-font-weight-description);
  color: var(--app-light-on-surface-variant);
  margin: 0; 
  line-height: 1.5em;
  word-wrap: break-word;
  white-space: pre-wrap; 
}

.dark-theme .m3-task-description-v6 { color: var(--app-dark-on-surface-variant); }

.m3-task-description-truncated-v6 {
  display: -webkit-box; 
  -webkit-line-clamp: 3; 
  -webkit-box-orient: vertical;  
  overflow: hidden;
  text-overflow: ellipsis;
  max-height: calc(1.5em * 3); 
}

.m3-button-complete-container-v6 {
  flex-shrink: 0; 
  display: flex;
  align-items: flex-start; 
  margin-left: auto; 
}

.m3-button-complete-v6 {
  background-color: var(--app-light-complete-button-bg) !important; /* Use specific complete button variables */
  color: var(--app-light-complete-button-text) !important;
  border-radius: var(--app-border-radius-button-pill, 28px); 
  padding: 10px 24px; 
  font-size: var(--app-font-size-button, 14px); 
  font-weight: var(--app-font-weight-button-emphasized, 500); 
  min-height: 40px; 
  line-height: normal; 
  text-transform: none; 
  border: none; 
  box-shadow: var(--app-elevation-1); 
}

.dark-theme .m3-button-complete-v6 {
  background-color: var(--app-dark-complete-button-bg) !important;
  color: var(--app-dark-complete-button-text) !important;
}

.m3-button-complete-v6 mat-icon {
  margin-right: 8px; 
  font-size: 20px; 
}

.m3-card-bottom-section {
  display: flex;
  flex-direction: column;
  align-items: center; 
  width: 100%; 
  padding: 0; 
  box-sizing: border-box;
}

.m3-footer-divider-v6 {
  height: 1px;
  background-color: var(--app-light-outline);
  width: 100%; 
  margin-top: var(--app-spacing-internal-card-secondary); 
  margin-bottom: var(--app-spacing-internal-card-secondary); 
}

.dark-theme .m3-footer-divider-v6 { background-color: var(--app-dark-outline); }

.m3-expand-button-v6 {
  font-family: var(--app-font-family, "Roboto", sans-serif);
  font-size: var(--app-font-size-label-small, 11px); 
  font-weight: 500; 
  letter-spacing: 0.5px; 
  line-height: 16px; 
  color: var(--app-light-primary-action-text); /* Use primary action text color */
  background-color: transparent;
  border: none;
  padding: 8px 16px; 
  cursor: pointer;
  text-align: center; 
  width: 100%; 
  box-sizing: border-box; 
  border-radius: var(--app-border-radius-button-small, 4px);
  transition: background-color 0.2s ease;
}

.m3-expand-button-v6:hover {
  background-color: rgba(0,0,0,0.04);
}

.dark-theme .m3-expand-button-v6 {
  color: var(--app-dark-primary-action-text);
}

.dark-theme .m3-expand-button-v6:hover {
  background-color: rgba(255,255,255,0.08);
}

.empty-state-card {
  background-color: var(--app-light-surface-container);
  border-radius: var(--app-border-radius-card);
  padding: 32px;
  margin-bottom: var(--app-spacing-inter-task-gap);
  border: 1px solid transparent; 
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  min-height: 120px;
  max-width: 850px; 
  margin-left: auto;
  margin-right: auto;
  width: 100%;
  box-sizing: border-box;
}

.dark-theme .empty-state-card { background-color: var(--app-dark-surface-container); }

.empty-state-text-primary {
  font-size: var(--app-font-size-empty-state-primary);
  font-weight: var(--app-font-weight-empty-state-primary);
  color: var(--app-light-on-surface-variant);
  margin: 0 0 var(--app-spacing-internal-card-primary);
}

.dark-theme .empty-state-text-primary { color: var(--app-dark-on-surface-variant); }

.empty-state-text-secondary {
  font-size: var(--app-font-size-empty-state-secondary);
  font-weight: var(--app-font-weight-empty-state-secondary);
  color: var(--app-light-on-surface-variant);
  margin: 0;
}

.dark-theme .empty-state-text-secondary { color: var(--app-dark-on-surface-variant); }


@media (max-width: 600px) {
  .m3-card-base.m3-active-task-card {
    margin-left: var(--app-spacing-page-margin-mobile, 16px); 
    margin-right: var(--app-spacing-page-margin-mobile, 16px);
    max-width: none; 
  }
  .m3-active-task-card-main-content-wrapper {
    padding: var(--app-spacing-card-padding-mobile, 16px); 
  }
  .m3-task-description-container-v6 {
     padding-left: calc(24px + var(--app-spacing-internal-card-primary)); 
  }
  .m3-card-header-v6 {
    flex-direction: column;
    align-items: stretch; 
  }
  .m3-header-start-v6 {
    margin-bottom: var(--app-spacing-internal-card-primary);
    align-items: flex-start; 
  }
  .m3-header-end-v6 {
    justify-content: space-between; 
    gap: var(--app-spacing-internal-card-secondary); 
  }
  .m3-card-content-area-v6 {
    flex-direction: column; 
    gap: var(--app-spacing-internal-card-primary); 
    padding-left: 0; 
  }
  .m3-task-description-container-v6 {
    margin-bottom: 0; 
    max-width: 100%; 
    padding-left: calc(24px + var(--app-spacing-internal-card-primary)); 
  }
  .m3-button-complete-container-v6 {
    align-self: flex-end; 
  }
  .m3-task-title-v6 {
    font-size: 22px; 
    line-height: 28px;
  }
  .m3-task-subtitle-v6 {
    font-size: calc(var(--app-font-size-task-subtitle) * 0.9);
  }
  .m3-timer-text-v6 {
    font-size: 24px; 
    line-height: 32px;
  }
  .m3-icon-button-play-pause-v6 {
    width: 36px; 
    height: 36px;
  }
  .m3-icon-button-play-pause-v6 mat-icon {
    font-size: 22px; 
  }
  .m3-button-complete-v6 {
    padding: 8px 20px; 
    font-size: calc(var(--app-font-size-button, 14px) * 0.95); 
    min-height: 36px; 
  }
  .m3-button-complete-v6 mat-icon {
    font-size: 18px; 
    margin-right: 6px;
  }
  .m3-expand-button-v6 {
    font-size: calc(var(--app-font-size-label-small, 11px) * 0.95);
    line-height: 14px;
    padding: var(--app-spacing-internal-card-secondary) var(--app-spacing-card-padding-mobile, 16px);
  }
  .empty-state-card {
    margin-left: var(--app-spacing-page-margin-mobile, 16px);
    margin-right: var(--app-spacing-page-margin-mobile, 16px);
    padding: 24px; 
  }
}

/* Blinking animation for paused timer */
@keyframes blinker {
  50% {
    opacity: 0.3;
  }
}

.blinking-timer .m3-timer-text-v6,
.blinking-timer .m3-timer-icon-v6 {
  animation: blinker 1.5s linear infinite;
}

